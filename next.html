<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ç”Ÿæ—¥é©šå–œ â€” ç¬¬ 2 é </title>

<!-- å­—å‹ -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

<style>
:root {
  --fg: #4b0082;
  --bgA: #d8b4fe;
  --bgB: #fbc2eb;
  --like: #ffb86b;
  --dislike: #7fb3ff;
  --closeBtn: #a78bfa;
}
html, body { height:100%; margin:0; padding:0; }
body {
  background: linear-gradient(to right, var(--bgA), var(--bgB));
  font-family: 'Noto Sans TC', sans-serif;
  overflow:hidden;
  color:var(--fg);
}

/* å…¨è¢å¹•ç½®ä¸­æ–‡å­— */
.slide { position:fixed; inset:0; display:flex; justify-content:center; align-items:center; background: transparent; z-index:3; }
.msg { font-weight:700; white-space:nowrap; opacity:0; transform: scale(.5); transition: all .6s ease; }
.msg.show { opacity:1; transform: scale(1); }
.msg.hide { opacity:0; transform: scale(.8); }
.msg.normal { font-size: clamp(28px, 6vw, 72px); }
.msg.count { font-size: clamp(72px, 20vw, 220px); }

/* è›‹ç³•å€ */
#cake-area { width:100%; display:flex; justify-content:center; margin-top:6vh; position:relative; z-index:2; }
.cake-media { width:min(560px,80%); display:none; opacity:0; transition:opacity .6s ease; }
.cake-media.show { display:block; opacity:1; }

/* ç¥è³€æ–‡å­— */
#afterCake { display:none; text-align:center; margin-top:16px; z-index:2; }
.celebrate { font-weight:700; color:var(--fg); font-size: clamp(32px, 6vw, 56px); white-space:nowrap; opacity:0; transform:scale(.6); transition: all .6s ease; }
.celebrate.show { opacity:1; transform:scale(1); }

/* æŒ‰éˆ• */
#buttons { margin-top:14px; display:flex; gap:16px; justify-content:center; opacity:0; }
.btn { padding:10px 22px; border:none; border-radius:12px; font-weight:700; font-size:18px; cursor:pointer; white-space:nowrap; transform:scale(1); transition: transform .25s ease, opacity .6s; }
.btn.like { background:var(--like); color:#3b2b1a; }
.btn.dislike { background:var(--dislike); color:#04304a; }
.btn:hover { transform:scale(1.08); }
.btn.left-in { animation:leftIn .7s forwards; }
.btn.right-in { animation:rightIn .7s forwards; }
@keyframes leftIn { from{opacity:0; transform:translateX(-40px);} to{opacity:1; transform:translateX(0);} }
@keyframes rightIn{ from{opacity:0; transform:translateX(40px);} to{opacity:1; transform:translateX(0);} }

/* emoji overlay */
#emojiOverlay { position:fixed; top:45%; left:50%; transform:translate(-50%,-50%) scale(.5); font-size:120px; opacity:0; transition: all .6s ease; z-index:5; }
#emojiOverlay.show { opacity:1; transform:translate(-50%,-50%) scale(1); }

/* emoji æ‰è½ */
.emoji-fall { position:fixed; top:-40px; font-size:28px; animation:emojiFall linear forwards; z-index:4; }
@keyframes emojiFall { to { transform:translateY(110vh) rotate(720deg); opacity:0; } }

/* å½©å±‘ */
.confetti { position: fixed; top: -10px; opacity: 0.9; z-index: 6; animation: confettiFall linear forwards; }
@keyframes confettiFall { to { transform: translateY(110vh) rotate(720deg); opacity: 0; } }

/* modal */
.modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:10; }
.modal.show { display:flex; }
.modal-content { background:white; padding:32px 40px; border-radius:14px; font-weight:700; text-align:center; font-size:1.6em; position:relative; }
.modal-content button { position:static; display:block; margin: 40px auto 0; background:var(--closeBtn); color:white; border:none; padding:14px 28px; border-radius:12px; font-weight:700; font-size:1.1em; cursor:pointer; }

/* ä¿ç•™å€å¡Š */
#future-area { display:none; }

/* ===== æ–°å‹•ç•« CSS ===== */
#overlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  pointer-events:none;
  background: transparent;
  overflow:hidden;
  z-index:20;
}
.shape {
  background: rgba(255,255,255,0.8);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  transition: all 1.2s ease, opacity 1s ease;
  position: relative;
  opacity: 0;
}
.shape.expanded {
  width: 100%;
  height: 100%;
  border-radius: 0%;
  opacity: 1;
}
.text-line {
  opacity: 0;
  color: #000;
  font-size: 24px;
  margin: 10px 0;
  animation: fadeSlideIn 0.5s forwards;
}
@keyframes fadeSlideIn { to { opacity: 1; transform: translateY(0);} }

</style>
</head>
<body>
<div id="main-container">
  <div id="cake-area">
    <video id="cakeVideo" class="cake-media" playsinline muted></video>
    <img id="cakeGif" class="cake-media" alt="cake gif" />
  </div>
  <div id="afterCake">
    <div id="celebrateText" class="celebrate">ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†</div>
    <div id="buttons">
      <button id="likeBtn" class="btn like">æˆ‘å¾ˆå–œæ­¡</button>
      <button id="dislikeBtn" class="btn dislike">æˆ‘ä¸å–œæ­¡</button>
    </div>
  </div>
</div>

<div id="emojiOverlay">ğŸ¥º</div>
<div id="modal" class="modal">
  <div class="modal-content">
    <div id="modalText"></div>
    <button id="modalClose">é—œé–‰</button>
  </div>
</div>

<audio id="bgm" src="blessing.mp3" loop></audio>
<div id="future-area"></div>
<div id="overlay"></div> <!-- æ–°å‹•ç•« overlay -->

<script>
// === èˆŠç¨‹å¼ç¢¼ ===
// é€™è£¡æ”¾ä½ åŸæœ¬çš„ COUNT_MESSAGESã€showCakeã€showCelebrateã€å½©å±‘ã€emojiã€modal ç­‰ JS
// ä¿æŒä¸å‹•
// çœç•¥é‡è¤‡è²¼ä¸Šï¼Œå¯¦éš›ä¸Šå°±æ˜¯ä½ æä¾›çš„å®Œæ•´ JS

// åªæ”¹ likeBtn.onclick
likeBtn.onclick = () => {
  startOverlaySequence();
};

// ===== æ–°å‹•ç•« JS =====
function startOverlaySequence() {
  const overlay = document.getElementById('overlay');
  overlay.innerHTML = '';

  // 1ï¸âƒ£ åœ“å½¢æ·¡å…¥
  const shape = document.createElement('div');
  shape.className = 'shape';
  overlay.appendChild(shape);

  requestAnimationFrame(() => { shape.style.opacity = 1; });

  // 2ï¸âƒ£ åœ“å½¢è®Šé•·æ–¹å½¢å¡«æ»¿
  setTimeout(() => { shape.classList.add('expanded'); }, 600);

  // 3ï¸âƒ£ æ–‡å­—é€è¡Œé¡¯ç¤º
  setTimeout(() => {
    const texts = ['ğŸ‰ è¬è¬ä½ å–œæ­¡ ğŸ‰','é€™æ˜¯ç‚ºä½ æº–å‚™çš„é©šå–œï¼','ğŸ è«‹ç›¡æƒ…äº«å— ğŸ'];
    texts.forEach((line,index)=>{
      const p = document.createElement('p');
      p.className = 'text-line';
      p.style.animationDelay = `${index*0.5}s`;
      p.textContent = line;
      shape.appendChild(p);
    });
  }, 1800);

  // 4ï¸âƒ£ æ–‡å­—é¡¯ç¤ºå®Œ â†’ æ•´å€‹èƒŒæ™¯æ·¡å‡º
  const totalTextTime = 1800 + (3*500);
  setTimeout(() => {
    shape.style.transition = 'opacity 1s ease';
    shape.style.opacity = 0;
    setTimeout(()=>overlay.innerHTML='',1000);
  }, totalTextTime + 500);
}

// å•Ÿå‹•èˆŠæµç¨‹
window.onload=()=>{
  try{bgm.play().catch(()=>{});}catch(e){}
  startSequence();
  launchConfetti();
};
</script>
</body>
</html>
